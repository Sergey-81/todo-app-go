# Журнал разработки ToDo-приложения

## 05-08-2025 05:25
### Создание базовой структуры
- Инициализирован Go-модуль: `go mod init todo-app`.
- Созданы директории:
  - `cmd/todo-app` — точка входа.
  - `internal/models` — структуры данных.
  - `docs` — документация.
- Добавлен этот файл `PROJECT_LOG.md`.

Изначальная структура проекта:
C:\Users\Сергей Нижегородов\hello\todo-app\
├── go.mod          # файл модуля Go
├── cmd\            # точка входа
├── internal\       # основной код
└── docs\           # документация

Теперь структура проекта выглядит так:
todo-app/
├── .github/
│   └── workflows/
│       └── ci.yml
├── cmd/
│   └── todo-app/
│       └── main.go
├── internal/
│   ├── manager/
│   │   ├── task_manager.go
│   │   └── task_manager_test.go
│   ├── models/
│   │   └── task.go
│   └── logger/
│       └── logger.go
└── go.mod

## 05-08-2025 07:55  
### Этап 1: Базовый каркас  
- Настроен CI/CD с тестами и линтерами  
- Реализован модуль логирования (100% coverage)  
- Определены структуры данных (модель Task)

## 05-08-2025 16:46  
### Этап 2: Добавление задач  
- Реализован метод AddTask() с проверками:
  - Непустое описание
  - Ограничение длины (1000 символов)
  - Автоинкремент ID
- Добавлены табличные тесты (92% coverage)
- Обновлена документация методов

## 05-08-2025 19:06
### Реализованы метрики:
todoapp_tasks_added_total (counter) - подсчет операций добавления
todoapp_task_desc_length_bytes (histogram) - распределение длин описаний
todoapp_add_task_duration_seconds (histogram) - время выполнения
Тестирование:
Написаны unit-тесты с 100% покрытием
Подтверждена работа в CI (зеленый маркер в GitHub)
## Мониторинг
Метрики доступны на порту 8080:
```bash
curl http://localhost:8080/metrics

## 06-08-2025 21:31
### Реализация HTTP API для AddTask

**Добавлено:**
- Роутер на базе `chi` (v5)
- Обработчик POST-запросов `/tasks`
- JSON-сериализация запросов/ответов:
  ```go
  type CreateTaskRequest struct {
      Description string `json:"description"`
  }
новая структура проекта:
  todo-app/
├── .github/
│   └── workflows/
│       └── ci.yml
├── cmd/
│   └── todo-app/
│       └── main.go          # Точка входа (инициализация сервера)
├── internal/
│   ├── manager/
│   │   ├── task_manager.go  # Логика добавления задач
│   │   └── task_manager_test.go
│   ├── models/
│   │   └── task.go          # Модель Task + CreateTaskRequest
│   ├── logger/
│   │   └── logger.go        # Логирование
│   └── server/
│       └── server.go        # Роутер и обработчик API (единственный новый файл!)
│── go.mod
│── go.sum
└── Dockerfile
## 07-08-2025 01:35
### Реализован Docker:
создан Dockerfile
успешно "упаковал" своё Go-приложение в Docker-контейнер
настроил CI/CD → GitHub Actions + Docker Hub

## 09-08-2025 06:46  
### Этап 3: Добавление задач 
- Реализован метод UpdateTask() с проверками:
  - Непустое описание
  - Ограничение длины (1000 символов)
  - Автоинкремент ID
- Добавлены табличные тесты (92% coverage)
- Обновлена документация методов

### Реализована базовая работа HTML-интерфейса
Открыто в браузере:
http://localhost:8080

Страница отображается корректно:
Заголовок «Мои задачи»
Поле ввода с плейсхолдером «Новая задача...»
Кнопка «Добавить»

новая структура проекта:
  todo-app/
├── .github/
│   └── workflows/
│       └── ci.yml
├── cmd/
│   └── todo-app/
│       └── main.go          # Точка входа (инициализация сервера)
├── internal/
│   ├── manager/
│   │   ├── task_manager.go  # Логика добавления задач
│   │   └── task_manager_test.go
│   ├── models/
│   │   └── task.go          # Модель Task + CreateTaskRequest
│   ├── logger/
│   │   └── logger.go        # Логирование
│   └── server/
│       └── server.go        # Роутер и обработчик API (единственный новый файл!)
├── static
│       └── index.html
│── go.mod
│── go.sum
└── Dockerfile

## 10-08-2025 00:41  
### Этап 4: Добавление задач 
- Реализован метод DeleteTask() с проверками:
  - Непустое описание
  - Ограничение длины (1000 символов)
  - Автоинкремент ID
- Добавлены табличные тесты (92% coverage)
- Обновлена документация методов

## 10-08-2025 18:03
### Добавил работающую функцию редактирования задач
Экранирование JavaScript:
Использован фильтр | js для безопасной передачи данных
Оптимизация HTML/JS
Упрощён CSS для форм редактирования
В main.go добавлен новый обработчик для обновления задач

## 10-08-2025 19:00
### Этап 4: Добавление функции ToggleComplete

## 10-08-2025 20:05
### Добавление функции фильтрации задач

## 11-08-2025 00:00
### добавил функции FilterByPriority и GetUpcomingTasks
функция GetUpcomingTasks пока без тестового покрытия
функция UpdateTask с покрытием 92,9%
выгружены в ГитХаб для резерва достигнутого прогресса
Затруднения с написанием тестов для функции GetUpcomingTasks

## 11-08-2025 18:09
### Решена проблема с тестированием функции GetUpcomingTasks

## 11-08-2025 21:59
### Добавлены новые функции FilterByTag и GetAllTags

## 18-08-2025 23:24
### добавлена новая функция FilterByDateRange.
100% покрытие тестами

## 19-08-2025 07:54
### начата разработка новой функции AddSubTask
реализованы функции ToggleSubTask и DeleteSubTask
100% покрытие тестами
в настоящий момент ведется тестирование HTML
первые тесты показали скрытые недочеты внедрения подзадач
нарушена структура отоборажения активных задач и их фильтрация
проверить основной функционал на то что подзадача не влияет на родительскую задачу
убедиться что подзадача просто привязана к родительской задаче как хвостик
решение полностью вынести подзадачи в отдельный endpoint: Вместо встроенных подзадач -- Загружается отдельно через AJAX

## 19-08-2025 01:39
### добавлена новая функция AddSubTask 
реализованы функции ToggleSubTask и DeleteSubTask
реализован HTML интерфейс (решение полностью вынести подзадачи в отдельный endpoint: Вместо встроенных подзадач -- Загружается отдельно через AJAX)
недочеты фильтрации
выявлен недостаток умных фильтров. если я хочу изменить диапазон сроков исполнения задач на экран выводятся также задачи которые уже выполнены хотя я хочу видеть в диапазоне видимости задачи активные
вывод фильтры работают отдельно друг от друга. нет связки между ними. таким образом я не могу построить фильтрацию задач по нужным пользователю наборам выборочных алгоритмов.


## 21-08-2025 10:46
### добавлена функция Расширенная фильтрация
вывод функция расширенной фильтрации на первый взгляд работает логичнее чем обычные функции фильтрации.
альтернатива отказаться от функции обычной фильтрации?
Важно пока нет покрытия тестами новых функций подзадач и расширенной фильтрации

// git add .
// git commit -m "добавлена новая функция AddSubTask"
// git push origin main